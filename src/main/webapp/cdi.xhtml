<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j">
<h:head>
	<link rel="shortcut icon" href="#{jsfrfEnv.imagePath}favicon.ico" />
	<title>RichFaces4 Push Demo CDI</title>
	<script>
	var n=1;
	function update(data){
		var p = jQuery('#outputDate');
		p.text(n+++': '+data);
	}
	</script>
</h:head>
<h:body>
	<h:form prependId="false">
		<a4j:commandButton value="CDI Push Test" action="#{cdiPushBean.push}" />
		<a4j:push id="datePush1" address="cdiAddress" ondataavailable="update(event.rf.data);" />
		<a4j:push id="datePush2" address="_cdiAddress">
			<f:ajax event="dataavailable" onevent="alert(event.rf.data);"/>
		</a4j:push>
		<div id="outputDate">等待中……</div>
	</h:form>
	<br/>
	<h:panelGrid>
		<h:link value="Index" outcome="index" />
		<h:link value="TopicContext" outcome="tc" />
		<h:link value="JMS" outcome="jms" />
	</h:panelGrid>
</h:body>
</html>